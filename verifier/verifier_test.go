package verifier

import (
	"container/list"
	"github.com/Zilliqa/gozilliqa-sdk/provider"
	"os"
	"testing"
)

func TestVerify(t *testing.T) {
	if os.Getenv("CI") != "" {
		t.Skip("Skipping testing in CI environment")
	}
	p := provider.NewProvider("https://kaus-exposed-apis6-api.dev.z7a.xyz/")
	verifier := &Verifier{RpcClient: p, NumOfDsGuard: 9}
	dsComm := list.New()
	dsComm.PushBack("0213D5A7F74B28F3F588FF6520748DBB541986E98F75FA78D6334B2D0AAB4C1E57")
	dsComm.PushBack("0239D4CAE39A7AC2F285796BABF7D28DC8EB7767E78409C70926D0929EA2941E36")
	dsComm.PushBack("02D2D695D4A352412E0D32A8BDF6EA3A606D35FE2C2F850C54D68727D065894986")
	dsComm.PushBack("02E5E1BE6C924349F2C2B20CE05A2650B3E56C7722A2E5952EE27D12DEE7A4A6E6")
	dsComm.PushBack("0300AB86B413FAA64A52FB61B5A28A6C361F87A5B0871C4F01C394D261415B0989")
	dsComm.PushBack("03019AF5B10FFE09FB0EE02B59195EF5E6F5BE51D17EAF5604EA452078CD465C4B")
	dsComm.PushBack("0323086D473DF937B6297FB755FA8E57C0FB2760512AED7757748B597C48F797A0")
	dsComm.PushBack("032AEE20CFC59EAEB7838DAC2A9BAF96C8D69CF2C866FB4A3F1DFB02BCFCA356BB")
	dsComm.PushBack("033207325A3CC671034FEBA86EC8D0AA412DF60C7E8292044D510DF582787DCC05")
	newDsComm, err := verifier.Verify("1", dsComm)
	if err != nil {
		t.Error(err)
	}

	t.Log(newDsComm)
}
